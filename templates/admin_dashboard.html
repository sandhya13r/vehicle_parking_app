{% extends "layout.html" %}
{% block title %}Admin Dashboard{% endblock %}
{% block content %}

<h2 class="text-center mb-4">Admin Dashboard</h2>

<div class="row">
    {% for item in spot_stats %}
    <div class="col-md-4">
        <div class="card mb-4 shadow-sm">
            <div class="card-body">
                <h5 class="card-title">{{ item.lots.prime_location }}</h5>
                <p><strong>Address:</strong> {{ item.lots.address }}</p>
                <p><strong>Pincode:</strong> {{ item.lots.pincode }}</p>
                <p><strong>Price/hour:</strong> â‚¹{{ item.lots.price_per_hour }}</p>
                <hr>
                <p><strong>Total Spots:</strong> {{ item.total_lot }}</p>
                <p><strong>Available:</strong> {{ item.available_lot }}</p>
                <p><strong>Occupied:</strong> {{ item.occupied_lot }}</p>

                <div class="d-flex flex-wrap gap-2 mt-3">
                    <a href="{{ url_for('view_spots', lot_id=item.lots.id) }}" class="btn btn-primary btn-sm">
                        View Spots
                    </a>

                    <a href="{{ url_for('view_lot_spots', lot_id=item.lots.id) }}" class="btn btn-sm" style="background-color: #6f42c1; color: white;">
                        View Lot Spots
                    </a>

                    <a href="{{ url_for('edit_lot', lot_id=item.lots.id) }}" class="btn btn-warning btn-sm">
                        Edit
                    </a>

                    <form action="{{ url_for('delete_lot', lot_id=item.lots.id) }}" method="POST" style="display:inline;">
                        <button type="submit" class="btn btn-danger btn-sm"
                            onclick="return confirm('Are you sure you want to delete this lot?');">
                            Delete
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<div class="text-center mt-4">
    <a href="{{ url_for('add_lot') }}" class="btn btn-success btn-lg">+ Add Parking Lot</a>
</div>

{% endblock %}
